/* =========================================================
                                                                     * GLOBAL ELEMENT STYLES
                                                                     * ======================================================= */

.remark-icon {
    cursor: pointer;
    color: #6c757d;
    transition: color 0.2s;
}

.remark-icon:hover {
    color: #0d6efd;
}

.remark-dot {
    height: 8px;
    width: 8px;
    background: #0d6efd;
    border-radius: 50%;
    display: inline-block;
    margin-left: 5px;
    vertical-align: middle;
}

.so-selected-dot {
    height: 8px;
    width: 8px;
    background: #0d6efd;
    border-radius: 50%;
    display: none;
}

.so-remark-flag {
    color: #6c757d;
    margin-right: 6px;
    display: none;
}

.so-remark-flag.active {
    color: #0d6efd;
    display: inline-block;
}

.row-highlighted {
    animation: flashRow 1.2s ease-in-out 3;
}

@keyframes flashRow {
    0% {
        background: #fff8d6;
    }

    50% {
        background: #ffe89a;
    }

    100% {
        background: transparent;
    }
}

.yz-caret {
    display: inline-block;
    transition: transform 0.18s ease;
    user-select: none;
    /* Tambahkan margin-left untuk mengatur posisi */
    margin-left: 5px;
    vertical-align: middle;
    line-height: 1;
}

/* Gaya baru untuk caret di Tabel 2 */
.yz-t2-vbeln-wrap {
    display: flex;
    align-items: center;
}

.yz-caret.rot {
    transform: rotate(90deg);
}

/* Mengatur focus mode untuk Card-Row Level 1 */
.customer-focus-mode .yz-customer-card:not(.is-focused) {
    display: none !important;
}

/* Menyembunyikan total global saat detail customer dibuka */
.customer-focus-mode ~ .yz-global-total-card {
    display: none;
}

/* Tambahan CSS agar metrik sejajar atas-bawah */
#metric-columns,
#footer-metric-columns {
    /* Pastikan elemen ini memegang lebar yang sama dan kolomnya terstruktur */
    width: 100%;
    justify-content: flex-end;
    /* Dorong ke kanan */
}

#footer-metric-columns .metric-box {
    /* Hapus border vertikal di footer agar terlihat lebih bersih */
    border-left: none !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
}

/* Atur metrik boxes agar selalu sejajar vertikal */
.yz-customer-card #metric-columns > .metric-box,
#footer-metric-columns > div {
    /* Hilangkan gap yang diatur d-flex gap-4 */
    margin-left: 2rem !important;
    margin-right: 2rem !important;
}

/* Metrik box pertama harus lurus dengan container */
.yz-customer-card #metric-columns > .metric-box:first-child {
    margin-left: 0 !important;
    padding-left: 0 !important;
}

/* Metrik box pertama di footer harus lurus dengan container */
#footer-metric-columns > div:first-child {
    margin-left: 0 !important;
}

/* Atur alignment teks di dalam metric box untuk memastikan angka sejajar kanan */
.metric-box .metric-value,
.metric-box .metric-label {
    text-align: right !important;
}

/* Perbaikan: Atur progress bar agar tetap di tengah horizontal di dalam metric-box */
.metric-box .progress {
    margin: 4px auto 0 !important;
    /* Mengatur ulang margin yang mungkin terpengaruh oleh alignment text-end */
}

.so-focus-mode .js-t2row {
    display: none;
}

.so-focus-mode .js-t2row.is-focused {
    display: table-row;
}

/* MODIFIKASI: Menghilangkan highlight baris merah penuh yang lama */
.yz-row-highlight-negative > td,
.yz-row-highlight-negative td {
    background-color: transparent !important;
}

.table-hover tbody tr.yz-row-highlight-negative:hover > td,
.table-hover tbody tr.yz-row-highlight-negative:hover td {
    background-color: #f8f9fa !important;
    /* Kembali ke hover abu-abu normal */
}

/* Gaya kustom untuk bubble Overdue/On Track */
.overdue-badge-bubble {
    padding: 0.35em 0.7em;
    font-size: 0.7rem;
    font-weight: 700;
    color: #fff;
    text-align: center;
    border-radius: 1rem;
    /* Bentuk bubble/pill */
    white-space: nowrap;
}

.bubble-late {
    background-color: #c53030;
    /* Merah gelap/Bordeaux */
}

.bubble-track {
    background-color: #38a3a5;
    /* Hijau Teal */
}

.bubble-today {
    background-color: #b7791f;
    /* Kuning Gelap/Coklat */
    color: #fff;
}

/* Tambahkan style untuk tombol collapse header Tabel 2 */
.yz-header-so .js-collapse-toggle {
    line-height: 1;
    padding: 2px 8px;
}

.yz-header-so .yz-collapse-caret {
    display: inline-block;
    transition: transform 0.18s ease;
}

.yz-header-so .yz-collapse-caret.rot {
    transform: rotate(90deg);
}

.remark-thread-list {
    max-height: 360px;
    overflow: auto;
    border: 1px solid #eee;
    border-radius: 0.5rem;
    padding: 0.75rem;
    background: #fafafa;
}

.remark-item {
    display: flex;
    gap: 0.6rem;
    padding: 0.5rem 0.6rem;
    border-radius: 0.5rem;
    background: #fff;
    border: 1px solid #f0f0f0;
    margin-bottom: 0.5rem;
}

.remark-item.own {
    border-color: #d1e7dd;
    background: #f8fff9;
}

.remark-item .meta {
    font-size: 0.8rem;
    color: #6c757d;
}

.remark-item .text {
    white-space: pre-wrap;
}

.remark-item .act {
    margin-left: auto;
}

.yz-machi-pct {
    cursor: help;
    text-decoration: underline dotted;
    white-space: nowrap;
}

.tooltip-cursor {
    cursor: pointer;
}

@keyframes flashRow {
    0% {
        background: #fff8d6;
    }

    50% {
        background: #ffe89a;
    }

    100% {
        background: transparent;
    }
}

.yz-caret {
    display: inline-block;
    transition: transform 0.18s ease;
    user-select: none;
    margin-left: 5px;
    vertical-align: middle;
    line-height: 1;
}

.yz-caret.rot {
    transform: rotate(90deg);
}

/* Tweak tampilan progress bar popover (hover di Machining/Assembly/etc.) */
.yz-machi-pct {
    cursor: pointer;
    text-decoration: underline dotted;
    white-space: nowrap;
    font-weight: bold;
    /* Dipertahankan dari popover-cursor sebelumnya */
}

/* Tambahan CSS agar metrik sejajar atas-bawah (Tabel Level 1/2) */
#metric-columns,
#footer-metric-columns {
    width: 100%;
    justify-content: flex-end;
}

.yz-customer-card #metric-columns > .metric-box,
#footer-metric-columns > div {
    margin-left: 2rem !important;
    margin-right: 2rem !important;
}

/* Mengatasi kasus kolom pertama */
.yz-customer-card #metric-columns > .metric-box:first-child,
#footer-metric-columns > div:first-child {
    margin-left: 0 !important;
    padding-left: 0 !important;
}

.metric-box .metric-value,
.metric-box .metric-label {
    text-align: right !important;
}

/* Gaya kustom untuk bubble Overdue/On Track */
.overdue-badge-bubble {
    padding: 0.35em 0.7em;
    font-size: 0.7rem;
    font-weight: 700;
    color: #fff;
    text-align: center;
    border-radius: 1rem;
    white-space: nowrap;
}

.bubble-late {
    background-color: #c53030;
}

.bubble-track {
    background-color: #38a3a5;
}

.bubble-today {
    background-color: #b7791f;
    color: #fff;
}

/* Dialog size & rounded header */
#machiningModal .modal-dialog,
#pembahananModal .modal-dialog {
    max-width: 550px;
    margin: 1.75rem auto;
}

#machiningModal .modal-content,
#pembahananModal .modal-content {
    border-radius: 0.75rem;
}

#machiningModal .modal-header,
#pembahananModal .modal-header {
    background: linear-gradient(90deg, #f8f9fa, #fff);
    border-bottom: 1px solid var(--yz-border);
    border-top-left-radius: 0.75rem;
    border-top-right-radius: 0.75rem;
}

#machiningModal .modal-body,
#pembahananModal .modal-body {
    padding: 1rem 1.25rem;
}

/* Shared cards & progress (class prefix 'machi-' dipakai di kedua modal) */
.machi-container {
    padding: 0;
}

.machi-matnr-display {
    font-size: 1.25rem;
    color: var(--yz-primary);
    font-weight: 700;
}

.machi-number-small {
    font-size: 0.8rem;
}

.machi-line-card {
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 0.75rem;
    padding: 1.25rem;
    transition: all 0.2s ease-in-out;
}

.machi-line-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
    transform: translateY(-2px);
    border-color: var(--yz-primary);
}

.machi-header {
    border-bottom: 1px dashed #f0f0f0;
    padding-bottom: 0.75rem;
    margin-bottom: 0.75rem !important;
}

.machi-description {
    font-size: 1rem;
    color: #343a40;
    font-weight: 500;
}

.machi-metrics {
    padding: 0 0.5rem;
    border: 1px solid #f8f9fa;
    background: #f8f9fa;
    border-radius: 0.5rem;
}

.machi-metrics .col-3 {
    flex: 0 0 25%;
    max-width: 25%;
}

.machi-metrics .border-start {
    border-left: 1px solid var(--yz-border) !important;
}

.machi-metrics .metric-label {
    text-align: center;
    color: #6c757d !important;
    font-size: 0.75rem !important;
    white-space: nowrap;
}

.machi-metrics .metric-value {
    font-size: 1.1rem;
    text-align: center !important;
}

.machi-progress {
    border-radius: 4px;
    background: #e9ecef;
}

.machi-progress .progress-bar {
    border-radius: 4px;
    transition: width 0.6s ease;
}

.machi-total-card {
    background: #e9f5ff;
    border: 1px solid #cce5ff;
    border-radius: 0.75rem;
    padding: 1rem;
}

.machi-total-card .text-primary {
    color: #0d6efd !important;
    font-size: 1.25rem;
}

.machi-total-card .text-success {
    color: #198754 !important;
    font-size: 1.25rem;
}

/* =========================================================
             * OVERDUE/ON-TRACK COLORS INSIDE MACHINING & PEMBAHANAN
             * ======================================================= */
/* (progress color already handled inline by classes) */

/* =========================================================
             * RESPONSIVE
             * ======================================================= */

@media (max-width: 992px) {
    .yz-customer-card #metric-columns > .metric-box,
    #footer-metric-columns > div {
        margin-left: 1rem !important;
        margin-right: 1rem !important;
    }
}

@media (max-width: 768px) {
    .yz-customer-card .d-flex.align-items-center.justify-content-between {
        gap: 0.75rem;
    }

    .yz-customer-card #metric-columns {
        flex-wrap: wrap;
        justify-content: flex-start;
    }

    .yz-customer-card #metric-columns .metric-box {
        min-width: 140px;
        margin: 0.25rem 1rem !important;
    }
}

@media (max-width: 576px) {
    #machiningModal .modal-dialog,
    #pembahananModal .modal-dialog {
        max-width: 95%;
        margin: 0.5rem auto;
    }

    .yz-customer-card {
        margin-left: 0;
    }

    .yz-nest-card {
        margin: 0 0 1rem 0;
        border-radius: 0.6rem;
    }

    .machi-metrics .col-3,
    .machi-metrics .col-4 {
        flex: 0 0 100%;
        max-width: 100%;
        margin-bottom: 0.75rem;
    }

    .machi-metrics .metric-label,
    .machi-metrics .metric-value {
        text-align: left !important;
    }

    .machi-metrics .col-4:last-child {
        margin-bottom: 0;
    }

    .machi-metrics .border-start {
        border-left: none !important;
    }

    .machi-header {
        flex-direction: column;
        align-items: flex-start !important;
    }

    .machi-status-badge {
        margin-top: 0.5rem;
    }

    .machi-total-card {
        flex-direction: column;
        align-items: flex-start !important;
    }

    .machi-total-card .d-flex.gap-4 {
        flex-direction: column;
        width: 100%;
        margin-top: 0.75rem;
    }

    .machi-total-card .d-flex.gap-4 > div {
        text-align: left !important;
        width: 100%;
    }
}

/* =========================================================
             * MISC UTILITIES
             * ======================================================= */

/* disable text underline on links used as JS triggers */
a.js-open-so {
    text-decoration: none;
}

a.js-open-so:hover {
    text-decoration: underline;
}

/* subtle shadows for cards */
.yz-card {
    border: 1px solid var(--yz-border);
    border-radius: 0.8rem;
}

.yz-card.shadow-sm {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04) !important;
}

/* small helpers */
.text-primary-emphasis {
    color: #0b5ed7;
}

.text-info-emphasis {
    color: #0aa2c0;
}

.yz-material-toggle-container {
    position: relative;
    display: inline-flex;
    padding: 4px; /* Padding di sekitar tombol */
    background-color: #f0f4f8; /* Warna latar belakang kontainer */
    border-radius: 20px; /* Sudut membulat */
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1),
        0 1px 1px rgba(255, 255, 255, 0.5); /* Efek inset halus */
    transition: background-color 0.3s ease;
}

.yz-toggle-btn {
    border: none;
    padding: 8px 15px;
    border-radius: 16px; /* Sudut membulat */
    font-weight: 600;
    font-size: 0.85rem;
    cursor: pointer;
    z-index: 10; /* Pastikan tombol di atas slider */
    position: relative;
    background-color: transparent;
    color: #4a5568; /* Warna teks default abu-abu tua */
    transition: color 0.3s ease, background-color 0.3s ease;
    min-width: 100px; /* Lebar minimum agar terlihat rapi */
    text-align: center;
}

/* Slider yang bergerak */
.yz-toggle-slider {
    position: absolute;
    top: 4px;
    left: 4px;
    height: calc(100% - 8px);
    background-color: #ffffff; /* Warna slider, putih bersih */
    border-radius: 16px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15); /* Bayangan dalam untuk efek mengambang */
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 5;
}

/* Kustomisasi untuk mode WOOD */
.yz-toggle-btn.yz-wood.active {
    color: #157347; /* Hijau tua saat aktif */
}
.yz-toggle-btn.yz-wood i {
    color: #198754; /* Icon hijau */
}

/* Kustomisasi untuk mode METAL */
.yz-toggle-btn.yz-metal.active {
    color: #495057; /* Abu-abu tua saat aktif */
}
.yz-toggle-btn.yz-metal i {
    color: #6c757d; /* Icon abu-abu */
}

/* Efek Hover (bahkan jika aktif) */
.yz-toggle-btn:hover {
    color: #3182ce; /* Warna biru saat hover */
}
.yz-toggle-btn.active:hover {
    /* Biarkan warna aktif tetap saat di hover */
    color: inherit;
}

/* Untuk transisi halus dari tombol yang tidak aktif */
.yz-toggle-btn:not(.active):hover {
    color: #3182ce;
}
